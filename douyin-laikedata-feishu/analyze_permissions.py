#!/usr/bin/env python3
"""
分析当前的权限列表
"""

# 当前授权的scope
current_scope = [200000032, 300000000, 130, 4, 100000005, 300000006, 
                 300000040, 300000041, 110, 14, 112, 100000014, 
                 300000052, 120, 122, 123, 124, 300000029]

# 巨量引擎常见权限码（根据文档）
known_permissions = {
    4: "广告管理",
    14: "广告数据",
    110: "工具-落地页",
    112: "工具-应用管理",
    120: "工具-橙子建站",
    122: "工具-DPA商品库",
    123: "工具-云图",
    124: "工具-巨量创意",
    130: "工具-线索管理",  # ← 这个应该是客资相关
    100000005: "账户信息",
    100000014: "本地推",
    200000032: "素材管理",
    300000000: "广告主管理",
    300000006: "资产管理",
    300000029: "工具-巨量云图",
    300000040: "工具-巨量引擎",
    300000041: "工具-巨量千川",
    300000052: "工具-巨量星图",
}

print("📋 当前授权的权限列表:\n")
for code in current_scope:
    name = known_permissions.get(code, "未知权限")
    marker = " ← 客资相关" if code == 130 else ""
    print(f"  {code}: {name}{marker}")

print("\n" + "=" * 60)
print("💡 分析:")
print("=" * 60)
print("✓ 已有权限码 130（工具-线索管理）")
print("✓ 已有权限码 100000014（本地推）")
print()
print("但仍然提示权限不足，可能原因:")
print("1. 权限码130不是客资管理权限")
print("2. 需要在巨量后台单独开通客资功能")
print("3. 客资数据在另一个独立系统（抖音来客）")
print()
print("建议:")
print("1. 检查巨量后台是否有'线索管理'或'客资管理'菜单")
print("2. 如果没有，可能需要申请开通")
print("3. 或者使用抖音来客独立API")
